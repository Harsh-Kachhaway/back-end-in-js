// Generated by CoffeeScript 1.9.3

/*
 * @author  Argi Karunia <arugikaru@yahoo.co.jp>
 * @author  Originally by nodejs.org
 * @link    https://github.com/tokopedia/nodame
 * @license http://opensource.org/licenses/MIT
 *
 * @version 1.0.0
 */

(function() {
  var Path, isNix, os;

  os = require('os');

  isNix = os.platform !== 'win32';

  Path = require('path');

  Path.sys = Path.join(__dirname, '..');

  Path.app = Path.join(Path.sys, '..', '..');

  Path.safe = function(pathString) {
    var get, parse;
    get = function() {
      var _path;
      pathString = Path.normalize(pathString);
      if (!Path.isAbsolute(pathString)) {
        pathString = Path.normalize(Path.app + Path.sep + pathString);
      }
      if (isNix) {
        return pathString;
      }
      _path = pathString.split(Path.sep);
      parse(_path);
      return Path.normalize(_path);
    };
    parse = function(arr) {
      if (typeof arr !== 'object') {
        return;
      }
      if (arr.length > 1) {
        arr[1] = Path.join(arr[0], arr[1]);
        arr.shift();
        if (arr.length > 1) {
          return parse(arr);
        }
        return Path.sep + arr[0];
      }
    };
    return get();
  };

  module.exports = Path;

}).call(this);
